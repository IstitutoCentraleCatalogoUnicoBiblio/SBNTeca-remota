<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
    <head th:fragment="header">
        <title>[[${title}]]</title>
        <script src="webjars/jquery/1.12.4/jquery.min.js" type="text/javascript"></script>
        <!-- <script src="webjars/jquery-ui/1.11.4/jquery-ui.min.js" type="text/javascript"></script> -->
        <script type="text/javascript" src="libs/jquery-ui/jquery-ui.1.10.4.min.js"></script>
        <script src="libs/fileupload/jquery.corner.js" type="text/javascript"></script>
        <script src="libs/fileupload/jquery.fileupload.js" type="text/javascript"></script>
        <script src="libs/fileupload/jquery.fileupload-process.js" type="text/javascript"></script>
        <script src="libs/fileupload/jquery.fileupload-jquery-ui.js" type="text/javascript"></script>
        <script src="libs/fileupload/jquery.iframe-transport.js" type="text/javascript"></script>
        <script src="libs/fileupload/vendor/jquery.ui.widget.js" type="text/javascript"></script>
        <script src="libs/datatable/datatable.min.js" type="text/javascript"></script>
        <script src="libs/datatable/datatable.buttons.min.js" type="text/javascript"></script>
        <!-- <script type="text/javascript" src="libs/datatable/jquery-datatable-bootstrap.js"></script> -->
        <script src="libs/jstree/dist/jstree.min.js" type="text/javascript"></script>
        <script th:inline="javascript">
            /*<![CDATA[*/
                var restUrl = /*[[${@baseRest}]]*/ "http://localhost:8079/AnalizzatoreMag2.0/rest/";
                var oaiUrl = /*[[${@oaiBaseRest}]]*/ "http://localhost/metaoaicat/rest/";
                var oaiHandler = /*[[${@oaiHandler}]]*/ "http://localhost/metaoaicat/OAIHandlerDati";
                
                $(document).ready(function() {
                	$("*").dblclick(function(e) {
                		e.preventDefault();
                	});
                });
                $.ajaxSetup({
                     headers: { 'Authorization': [[${accessToken}]] }
                });
            /*]]>*/
        </script>
        <link rel="shortcut icon" href="images/favicon.ico?v=3" sizes="16x16"/>
        <link href="css/styles.css" rel="stylesheet" type="text/css"/>
        <!-- <link href="webjars/jquery-ui/1.11.4/jquery-ui.min.css" rel="stylesheet" type="text/css"/> -->
        <link href="libs/modaal/modaal.min.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="libs/jstree/dist/themes/default/style.min.css" />
        <link rel="stylesheet" type="text/css" media="all" href="libs/jquery-ui/jquery-ui-bootstrap/jquery-ui-1.10.0.custom.css" />
        <link href="libs/datatable/datatable-custom.css" rel="stylesheet" type="text/css"/>
        <link href="libs/modaal/modaal-custom.css" rel="stylesheet" type="text/css"/>
        <link href="css/teca_digitale.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <div>
            <div class="jumbotron" th:fragment="heading">
                <div>
                    <div class="logo-header"><img alt="logo" src="images/logo-iccu.png"></img></div>
                    <h4>[[${title}]] - Pannello di controllo</h4>
                    <div class="pull-right" th:inline="text">
                        <div class="pull-left">Utente: [[${#httpServletRequest.remoteUser}]]</div>
                        <div id="exit-menu" class="pull-left"><a th:href="@{logout}" class="logout" title="Logout"><i class="icon-signout"></i> Logout</a></div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span2">
                        <div class="well well-small" th:fragment="menu">
                            <ul class="nav nav-list" id="menu">
                                <li th:class="${#httpServletRequest.servletPath.endsWith('home') || #httpServletRequest.servletPath.equals('/') ? 'active' : ''}"><a th:href="@{home}">Home</a></li>
                                <li class="nav-header" sec:authorize="hasRole('ROLE_SEARCH_AREA_MANAGER')">Progetti</li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('upload') ? 'active' : ''}" sec:authorize="hasRole('ROLE_UPLOAD_MANAGER')"><a th:href="@{upload}">Upload Nuovo Progetto</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('uploadUpdate') ? 'active' : ''}" sec:authorize="hasRole('ROLE_UPLOAD_UPDATE_MANAGER')"><a th:href="@{uploadUpdate}">Upload Aggiornamento</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('import') ? 'active' : ''}" sec:authorize="hasRole('ROLE_IMPORT_MANAGER')"><a th:href="@{import}">Importa Progetto</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('update') ? 'active' : ''}" sec:authorize="hasRole('ROLE_UPDATE_MANAGER')"><a th:href="@{update}">Aggiorna Progetto</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('changeUsage') ? 'active' : ''}" sec:authorize="hasRole('ROLE_CHANGE_USAGE_MANAGER')"><a th:href="@{changeUsage}">Cambio Usage</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('clear') ? 'active' : ''}" sec:authorize="hasRole('ROLE_DELETE_PROJECT_MANAGER')"><a th:href="@{clear}">Cancella Progetto</a></li>
                                <li class="nav-header" sec:authorize="hasRole('ROLE_SEARCH_AREA_MANAGER')">Filesystem virtuale</li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('vfs') || #httpServletRequest.servletPath.endsWith('vfs-container') ? 'active' : ''}" sec:authorize="hasRole('ROLE_DELETE_PROJECT_MANAGER')"><a th:href="@{vfs}">Esplora</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('vfs-searchs') ? 'active' : ''}" sec:authorize="hasRole('ROLE_DELETE_PROJECT_MANAGER')"><a th:href="@{vfs-searchs}">Ricerca</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('uploadResources') ? 'active' : ''}" sec:authorize="hasRole('ROLE_UPLOAD_UPDATE_MANAGER')"><a th:href="@{uploadResources}">Upload oggetti</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('uploadUnimarc') ? 'active' : ''}" sec:authorize="hasRole('ROLE_UPLOAD_UPDATE_MANAGER')"><a th:href="@{uploadUnimarc}">Upload Unimarc/Csv</a></li>
                                <li class="nav-header" sec:authorize="hasRole('ROLE_SEARCH_AREA_MANAGER')">Gestione</li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('drafts') ? 'active' : ''}" sec:authorize="hasRole('ROLE_DRAFT_MANAGER')"><a th:href="@{drafts}">Bozze</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('search') ? 'active' : ''}" sec:authorize="hasRole('ROLE_SEARCH_MANAGER')"><a th:href="@{search}">Consulta</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('public') ? 'active' : ''}" sec:authorize="hasRole('ROLE_PUBLICATION_MANAGER')"><a th:href="@{public}">Pubblica</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('delete') ? 'active' : ''}" sec:authorize="hasRole('ROLE_DELETE_MANAGER')"><a th:href="@{delete}">Elimina</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('normalize') ? 'active' : ''}" sec:authorize="hasRole('ROLE_NORMALIZE_MANAGER')"><a th:href="@{normalize}">Normalizza</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('export') ? 'active' : ''}" sec:authorize="hasRole('ROLE_EXPORT_MANAGER')"><a th:href="@{export}">Esporta</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('export_panel') ? 'active' : ''}" sec:authorize="hasRole('ROLE_EXPORT_PANEL_MANAGER')"><a th:href="@{export_panel}">Pannello Esporta</a></li>
                                <li class="nav-header" sec:authorize="hasRole('ROLE_STATS_AREA_MANAGER')">Statistiche</li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('stats') ? 'active' : ''}" sec:authorize="hasRole('ROLE_STATS_MANAGER')"><a th:href="@{stats}">Elaborati Statistici</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('objectsStats') ? 'active' : ''}" sec:authorize="hasRole('ROLE_DIGITAL_OBJECT_STATS_MANAGER')"><a th:href="@{objectsStats}">Oggetti Digitali</a></li>
                                <li class="nav-header" sec:authorize="hasRole('ROLE_OAISET_MANAGER')">OAI Provider</li>
                                <li th:class="${#httpServletRequest.servletPath.contains('oaiset') ? 'active' : ''}"><a th:href="@{oaisets}" sec:authorize="hasRole('ROLE_OAISET_MANAGER')">Sets</a></li>
                                <li class="nav-header" sec:authorize="hasRole('ROLE_USER_AREA_MANAGER')">Gestione Utenti</li>
                                <li th:class="${#httpServletRequest.servletPath.contains('user') ? 'active' : ''}" sec:authorize="hasRole('ROLE_USER_MANAGER')"><a th:href="@{users}">Utenti</a></li>
                                <li th:class="${#httpServletRequest.servletPath.endsWith('roles') ? 'active' : ''}" sec:authorize="hasRole('ROLE_ROLES_MANAGER')"><a th:href="@{roles}">Ruoli</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="span9">
                        <div class="page-menu-header">
                            <h3 class="section_header">Ricerca MAG</h3>
                        </div>
                        <div id="ricerca_avanzata" class="row-fluid" th:fragment="searchForm">
                            <div class="span12 well">
                                <div class="row-fluid">
                                    <div class="form-vertical">
                                        <div class="control-group">
                                            <label class="control-label" for="channel_text"><b>Testo da cercare:</b></label>
                                            <div class="controls"><input class="channel span8" name="channel_text" id="channel_text" /></div>
                                        </div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label import-label" for="channel_project"><b>Progetto/cartella:</b></label>
                                                <div class="controls"><select id="channel_project" name="channel_project" class="channel multiselect span9" multiple="multiple"></select></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label import-label" for="channel_documentFormat"><b>Tipo contenitore:</b></label>
                                                <div class="controls"><select class="channel multiselect span9" name="channel_documentFormat" multiple="multiple" id="channel_documentFormat"></select></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid" id="timestamp_area">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group" id="channel_timestamp_start_control">
                                                <label class="control-label import-label" for="channel_timestamp_start"><b>Data ultima modifica inizio (yyyy-mm-dd):</b></label>
                                                <div class="controls"><input class="channel channel_date span9" name="channel_timestamp_start" id="channel_timestamp_start" /></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group" id="channel_timestamp_end_control">
                                                <label class="control-label import-label" for="channel_timestamp_end"><b>Data ultima modifica fine (yyyy-mm-dd):</b></label>
                                                <div class="controls"><input class="channel channel_date span9" name="channel_timestamp_end" id="channel_timestamp_end" /></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_identifier"><b>Identifier:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_identifier" id="channel_identifier" /></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_title"><b>Titolo:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_title" id="channel_title" /></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_year/part_number"><b>Anno/Numero parte:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_year/part_number" id="channel_year/part_number" /></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_issue/part_name"><b>Estremi fasc./Titolo parte:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_issue/part_name" id="channel_issue/part_name" /></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_creator"><b>Autore:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_creator" id="channel_creator" /></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_publisher"><b>Editore:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_publisher" id="channel_publisher" /></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_contributor"><b>Contributore:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_contributor" id="channel_contributor" /></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_subject"><b>Soggetto:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_subject" id="channel_subject" /></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_levelString"><b>Livello bibliografico:</b></label>
                                                <div class="controls"><select id="channel_levelString" class="channel span9" name="channel_levelString"></select></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_date"><b>Data di pubblicazione:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_date" id="channel_date" /></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_type"><b>Tipo Documento:</b></label>
                                                <div class="controls"><select id="channel_type" name="channel_type" class="channel multiselect span9" multiple="multiple"></select></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_typeDigitale"><b>Formato digitale:</b></label>
                                                <div class="controls"><select id="channel_typeDigitale" name="channel_typeDigitale" class="channel multiselect span9" multiple="multiple"></select></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_format"><b>Sotto Tipo:</b></label>
                                                <div class="controls"><input id="channel_format" name="channel_format" class="channel span9" /></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_holdingsAll"><b>Localizzazione:</b></label>
                                                <div class="controls"><input class="channel span9" name="channel_holdingsAll" id="channel_holdingsAll" /></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_collection"><b>Collezione:</b></label>
                                                <div class="controls"><select class="channel multiselect span9" multiple="multiple" name="channel_collection" id="channel_collection"></select></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="channel_agency"><b>Agenzia:</b></label>
                                                <div class="controls"><select id="channel_agency" name="channel_agency" class="channel multiselect span9" multiple="multiple"></select></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${!#httpServletRequest.servletPath.contains('oaisetBuildQuery')}">
                                    <div class="span6">
                                        <div class="form-vertical">
                                            <div class="help-block row"></div>
                                            <div class="help-block row"></div>
                                            <div class="control-group">
                                                <label class="control-label" for="publicFlag"><b>Pubblicato:</b></label>
                                                <div class="controls">
                                                    <select id="publicFlag" name="publicFlag">
                                                        <option value="">Si/No</option>
                                                        <option value="0">No</option>
                                                        <option value="1" th:selected="${#httpServletRequest.servletPath.contains('oaisetBuildQuery')}">Si</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div class="row-fluid form-inline">
                                    <a id="searchBtn" title="Cerca"><i class="icon-search btn-icon"></i></a>
                                    <a id="deleteBtn" title="Cancella Ricerca"><i class="icon-remove btn-icon"></i></a>
                                </div>
                            </div>
                        </div>
                        <div id="resultArea" style="display: none" class="row-fluid" th:fragment="resultArea">
                            <div class="row-fluid">
                                <div class="span3 well well-small">
                                    <h4>Raffina la ricerca</h4>
                                    <h5>Filtri di ricerca</h5>
                                    <ul id="search_filters" class="nav nav-list">
                                        <li>-</li>
                                    </ul>
                                    <h5 id="facet_documentFormat_header">Tipo contenitore</h5>
                                    <ul id="facet_documentFormat" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_type_header">Tipo Documento</h5>
                                    <ul id="facet_type" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_levelString_header">Livello Bibliografico</h5>
                                    <ul id="facet_levelString" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato disponibile</li>
                                    </ul>
                                    <h5 id="facet_project_header">Progetto</h5>
                                    <ul id="facet_project" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_collection_header">Collezione</h5>
                                    <ul id="facet_collection" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato disponibile</li>
                                    </ul>
                                    <h5 id="facet_agency_header">Agenzia</h5>
                                    <ul id="facet_agency" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_library_header">Biblioteca</h5>
                                    <ul id="facet_library" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_subject_header">Soggetto</h5>
                                    <ul id="facet_subject" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_typeDigitale_header">Formato digitale</h5>
                                    <ul id="facet_typeDigitale" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_language_header">Lingua</h5>
                                    <ul id="facet_language" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_creator_header">Autore</h5>
                                    <ul id="facet_creator" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_contributor_header">Contributore</h5>
                                    <ul id="facet_contributor" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_publisher_header">Editore</h5>
                                    <ul id="facet_publisher" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                    <h5 id="facet_date_header">Data Pubblicazione</h5>
                                    <ul id="facet_date" class="facet_field_display nav nav-list">
                                        <li>Nessun risultato</li>
                                    </ul>
                                </div>
                                <div class="span9">
                                    <div class="row-fluid">
                                        <h4>Risultati</h4>
                                        <div class="fast_selection" th:if="${!#httpServletRequest.servletPath.contains('search') &amp;&amp; !#httpServletRequest.servletPath.contains('oaisetNew') &amp;&amp; !#httpServletRequest.servletPath.contains('oaisetBuildQuery')}">
                                            <a class="btn-link" id="searchSelectAll" title="Seleziona tutti"><img src="images/select_all_icon.png"></img></a>
                                            <a class="btn-link" id="searchSelectPage" title="Seleziona Pagina"><img src="images/select_page_icon.png"></img></a>
                                            <a class="btn-link" id="searchUnselectPage" title="Deseleziona Pagina"><img src="images/unselect_page_icon.png"></img></a>
                                            <a class="btn-link" id="searchUnselectAll" title="Deseleziona tutti"><img src="images/unselect_all_icon.png"></img></a>
                                        </div>
                                        <div class="help-block row"></div>
                                        <table id="searchResults" class="table table-bordered table-striped"></table>
                                        <input type="hidden" id="checkPublication" th:value="${checkPublication}" />
                                        <input type="hidden" id="selectableResults" th:value="${selectableResults}" />
                                        <input type="hidden" id="userID" th:value="${userID}" />
                                    </div>
                                    <div class="help-block row"></div>
                                    <div class="help-block row"></div>
                                    <div class="help-block row"></div>
                                    <div class="help-block row"></div>
                                    <div class="row-fluid">
                                        <div id="executeOpError" style="display: none" class="alert alert-error span12"></div>
                                    </div>
                                    <div class="help-block row"></div>
                                    <div class="help-block row"></div>
                                    <div class="row-fluid">
                                        <div class="span6">
                                            <input type="button" id="buildQueryBtn" class="btn btn-primary" value="Imposta Query OAI Set" th:if="${#httpServletRequest.servletPath.contains('oaisetBuildQuery')}" onclick="$('#buildQueryForm').submit();" />
                                            <input type="button" id="backToOaisetNewBtn" class="btn btn-default" value="Annulla Query OAI Set" th:if="${#httpServletRequest.servletPath.contains('oaisetBuildQuery')}" onclick="$('#backToOaisetForm').submit();" />
                                            <form style="display: none" method="POST" th:action="@{update == 'true' ? oaisets : oaisetNew}" id="buildQueryForm" th:if="${#httpServletRequest.servletPath.contains('oaisetBuildQuery')}">
                                                <input type="hidden" id="solrquery" name="solrquery" value="" />
                                            </form>
                                            <form style="display: none" method="POST" th:action="@{update == 'true' ? oaisets : oaisetNew}" id="backToOaisetForm" th:if="${#httpServletRequest.servletPath.contains('oaisetBuildQuery')}"></form>
                                        </div>
                                        <div class="offset8" th:if="${!#httpServletRequest.servletPath.contains('search') &amp;&amp; !#httpServletRequest.servletPath.contains('oaisetBuildQuery')}">
                                            <input type="button" id="executeOpBtn" class="btn btn-primary" value="Avanti" />
                                            <input type="button" class="btn btn-default" id="backToSearchBtn" value="Torna alla ricerca" />
                                        </div>
                                        <div class="offset9" th:if="${#httpServletRequest.servletPath.contains('oaisetBuildQuery') || #httpServletRequest.servletPath.contains('search')}">
                                            <input type="button" class="btn btn-default" id="backToSearchBtn" value="Torna alla ricerca" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="summaryOperation" class="row-fluid" style="display: none" th:fragment="summaryOperation">
                            <div id="confirmSelectionArea" class="row-fluid">
                                <div class="row-fluid">
                                    <h4>MAG/METS selezionati</h4>
                                    <table id="searchSummarySelected" class="table table-condensed"></table>
                                </div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div class="well well-small form-inline row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div class="control-group">
                                        <label for="normalize_type" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_type" name="normalize_type" /> Tipo Documento</label>
                                        <label for="normalize_creator" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_creator" name="normalize_creator" /> Autore</label>
                                        <label for="normalize_contributor" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_contributor" name="normalize_contributor" /> Contributore</label>
                                        <label for="normalize_publisher" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_publisher" name="normalize_publisher" /> Editore (solo MAG)</label>
                                    </div>
                                    <div class="control-group">
                                        <label for="normalize_format" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_format" name="normalize_format" /> Sotto Tipo</label>
                                        <label for="normalize_stprog" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_stprog" name="normalize_stprog" /> Stprog</label>
                                        <label for="normalize_agency" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_agency" name="normalize_agency" /> Agenzia</label>
                                        <label for="normalize_collection" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_collection" name="normalize_collection" /> Collezione</label>
                                    </div>
                                    <div class="control-group">
                                        <label for="normalize_subject" class="checkbox inline span3"> <input type="checkbox" class="normalize_field" id="normalize_subject" name="normalize_subject" /> Soggetto</label>
                                        <label for="normalize_title" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_title" name="normalize_title" /> Titolo (solo MAG)</label>
                                        <label for="normalize_library" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_library" name="normalize_library" /> Localizzazione</label>
                                        <label for="normalize_language" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_language" name="normalize_language" /> Lingua</label>
                                    </div>
                                    <div class="control-group">
                                        <label for="normalize_date" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_date" name="normalize_date" /> Data</label>
                                        <label for="normalize_rights" class="checkbox inline span3"><input type="checkbox" class="normalize_field" id="normalize_rights" name="normalize_rights" /> Diritti</label>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="type_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Tipo Documento</h5>
                                        <table id="type_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="creator_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Autore</h5>
                                        <table id="creator_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="contributor_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Contributore</h5>
                                        <table id="contributor_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="publisher_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Editore</h5>
                                        <table id="publisher_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="format_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Sotto Tipo</h5>
                                        <table id="format_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="stprog_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Stprog</h5>
                                        <table id="stprog_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="agency_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Agenzia</h5>
                                        <table id="agency_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="collection_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Collezione</h5>
                                        <table id="collection_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="subject_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Soggetto</h5>
                                        <table id="subject_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="title_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Titolo</h5>
                                        <table id="title_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="library_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Localizzazione</h5>
                                        <table id="library_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="language_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Lingua</h5>
                                        <table id="language_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="date_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Data</h5>
                                        <table id="date_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="row-fluid" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                    <div id="rights_tableArea" class="offset1 span7" style="display: none">
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <div class="help-block row"></div>
                                        <h5>Diritti</h5>
                                        <table id="rights_table" class="table table-bordered table-condensed normalize_table"></table>
                                    </div>
                                </div>
                                <div class="help-block row" th:if="${#httpServletRequest.servletPath.contains('normalize')}"></div>
                                <div class="help-block row" th:if="${#httpServletRequest.servletPath.contains('normalize')}"></div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div class="well well-small form-inline row-fluid" style="box-sizing: border-box;">
                                    <div class="span9">
                                        <div id="publicFlagArea" class="row-fluid control-group" th:if="${#httpServletRequest.servletPath.contains('public')}">
                                            <label class="radio inline"><b>Pubblica:</b></label>
                                            <label for="publicFlag_1" class="radio inline"><input type="radio" name="publicFlag" value="1" id="publicFlag_1" /> Si</label>
                                            <label for="publicFlag_0" class="radio inline"><input type="radio" name="publicFlag" value="0" id="publicFlag_0" /> No</label>
                                            <div id="publicFlagError" style="display: none" class="offset1 help-inline">Opzione di pubblicazione non selezionata</div>
                                        </div>
                                        <div id="exportArea" class="row-fluid control-group" th:if="${#httpServletRequest.servletPath.contains('export')}">
                                            <label class="inline">Nome File: </label>
                                            <input type="text" id="exportFilename" name="exportFilename" class="input-medium" />
                                            <select id="exportExtension" name="exportExtension" class="input-small">
                                                <option value="zip" selected="selected">ZIP</option>
                                                <option value="tar">TAR</option>
                                                <option value="tar.gz">TAR.GZ</option>
                                                <option value="tar.bz2">TAR.BZ2</option>
                                                <option value="tar.Z">TAR.Z</option>
                                            </select>
                                            <select id="exportFormat" name="exportFormat" class="input-medium">
                                                <option value="xml">XML con oggetti digitali</option>
                                                <option value="xml-mag02">MAG 0.2</option>
                                                <option value="iiif">Manifest IIIF</option>
                                            </select>
                                            <select id="exportUsage" name="exportUsage" class="input-medium" style="display: none">
                                                <option value="1">Usage 1</option>
                                                <option value="2">Usage 2</option>
                                                <option value="3" selected="selected">Usage 3</option>
                                            </select>
                                            <label id="exportUsage1Label" class="checkbox inline" style="display: none"><input type="checkbox" id="exportUsage1" name="exportUsage1" value="1"/>Usage 1</label>
                                            <label id="exportUsage2Label" class="checkbox inline" style="display: none"><input type="checkbox" id="exportUsage2" name="exportUsage2" value="2"/>2</label>
                                            <label id="exportUsage3Label" class="checkbox inline" style="display: none"><input type="checkbox" id="exportUsage3" name="exportUsage3" value="3"/>3</label>
                                            <label id="exportUsage5Label" class="checkbox inline" style="display: none" title="Esportazione audio usage 4 come usage 3"><input type="checkbox" id="exportUsage5" name="exportUsage5" value="5"/>Audio: 4 come 3</label>
                                            <label class="checkbox inline" style="display: none"><input type="checkbox" id="exportDress" name="exportDress" /> Vestizione</label>
                                        </div>
                                        <div id="normalizeArea" style="display: none" class="row-fluid control-group error" th:if="${#httpServletRequest.servletPath.contains('normalize')}">
                                            <div id="normalizeError" class="help-inline"></div>
                                        </div>
                                    </div>
                                    <div id="confirmButtonArea" class="span3">
                                        <input type="button" id="publicMagBtn" class="btn btn-primary" value="Pubblica" th:if="${#httpServletRequest.servletPath.contains('public')}" />
                                        <input type="button" id="deleteMagBtn" class="btn btn-primary" value="Cancella" th:if="${#httpServletRequest.servletPath.contains('delete')}" />
                                        <input type="button" id="normalizeMagBtn" class="btn btn-primary" value="Normalizza" th:if="${#httpServletRequest.servletPath.contains('normalize')}" />
                                        <input type="button" id="exportMagBtn" class="btn btn-primary" value="Esporta" th:if="${#httpServletRequest.servletPath.contains('export')}" />
                                        <input type="button" value="Annulla" class="btn btn-default" onclick="window.location.reload(true);" />
                                    </div>
                                </div>
                            </div>
                            <div id="finalResult" class="row-fluid" style="display: none">
                                <div class="row-fluid">
                                    <div id="infoResult" class="well well-small management_info span12"></div>
                                </div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div id="finalResultTableArea" class="row-fluid" style="display: none">
                                    <h4>Resoconto finale</h4>
                                    <table id="finalResultTable" class="table table-bordered table-condensed"></table>
                                </div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div class="help-block row"></div>
                                <div class="row-fluid well well-small" style="box-sizing: border-box;">
                                    <input id="opBackToStartBtn" type="button" class="btn btn-default" value="Torna alla ricerca" />
                                </div>
                            </div>
                        </div>
                        <div th:fragment="importArea">
                            <input type="hidden" id="userID" th:value="${userID}" />
                            <input type="hidden" name="sorgenteDoc" id="sorgenteDoc" value="file" />
                            <div id="tablesArea" class="span12 row-fluid">
                                <div id="projectArea" class="span5">
                                    <h4>Progetti</h4>
                                    <table id="projectTable" class="table table-bordered table-striped"></table>
                                </div>
                                <div id="singleMagArea" class="span6 offset1" style="display: none;">
                                    <h4 id="magTableHeader">MAG</h4>
                                    <table id="magTable" class="table table-bordered table-striped"></table>
                                    <div class="span12">
                                        <input id="magRecentBtn" type="button" value="Visualizza recenti" class="btn btn-default" th:if="${#httpServletRequest.servletPath.contains('update') || #httpServletRequest.servletPath.contains('changeUsage')}" />
                                        <input type="button" value="Nascondi" class="btn btn-default" onclick="$('#singleMagArea').hide('slide', { direction: 'left' }, 500);" />
                                    </div>
                                </div>
                            </div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div id="selectedMagArea" class="span12 row">
                                <h4>MAG/METS selezionati</h4>
                                <table class="table table-bordered table-condensed" id="selectedMagTable"></table>
                            </div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div id="importForm" class="well span12 form-horizontal" style="display: none">
                                <div class="form-horizontal">
                                    <fieldset>
                                        <legend>Configurazioni generali</legend>
                                        <div class="control-group" th:if="${!#httpServletRequest.servletPath.contains('changeUsage') and #httpServletRequest.getParameter('validate') == null}">
                                            <label class="control-label" for="Validator.DocumentFormat">Formato dei documenti</label>
                                            <div class="controls"><select id="Validator.DocumentFormat" name="Validator.DocumentFormat" class="config_parameter">
                                                <option value="mag" selected="selected">MAG</option>
                                                <option value="mets">METS</option>
                                            </select></div>
                                        </div>
                                        <div class="control-group" id="acqUsageGroup">
                                            <label class="control-label">Usage Acquisizione</label>
                                            <div class="controls">
                                                <div class="form-inline">
                                                    <label class="checkbox inline" for="usagea_1"><input type="checkbox" class="acq_usage" name="usagea_1" id="usagea_1" value="1" /> 1</label>
                                                    <label class="checkbox inline" for="usagea_2"><input type="checkbox" class="acq_usage" name="usagea_2" id="usagea_2" value="2" /> 2</label>
                                                    <label class="checkbox inline" for="usagea_3"><input type="checkbox" class="acq_usage" name="usagea_3" id="usagea_3" value="3" /> 3</label>
                                                    <label class="checkbox inline" for="usagea_4"><input type="checkbox" class="acq_usage" name="usagea_4" id="usagea_4" value="4" /> 4</label>
                                                    <span id="errorAcqUsage" class="help-inline offset1" style="display: none">Usage di acquisizione non specificati</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="control-group" id="expUsageGroup">
                                            <label class="control-label">Usage Esportazione</label>
                                            <div class="controls">
                                                <div class="form-inline">
                                                    <label class="checkbox inline" for="usagee_1"><input type="checkbox" name="usagee_1" id="usagee_1" value="1" disabled="disabled" /> 1</label>
                                                    <label class="checkbox inline" for="usagee_2"><input type="checkbox" name="usagee_2" id="usagee_2" value="2" disabled="disabled" /> 2</label>
                                                    <label class="checkbox inline" for="usagee_3"><input type="checkbox" name="usagee_3" id="usagee_3" value="3" disabled="disabled" /> 3</label>
                                                    <label class="checkbox inline" for="usagee_4"><input type="checkbox" name="usagee_4" id="usagee_4" value="4" disabled="disabled" /> 4</label>
                                                    <label class="checkbox inline" for="usagee_5" title="Creazione automatica di un preview dei media di tipo audio da usage 3"><input type="checkbox" name="usagee_5" id="usagee_5" value="5" disabled="disabled"/> 4 (audio preview da 3)</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="control-group" th:if="${#httpServletRequest.servletPath.contains('import')
                                            or #httpServletRequest.servletPath.contains('update')}">
                                            <label class="control-label" for="service">Tipo di servizio</label>
                                            <div class="controls">
                                                <label class="radio inline"><input type="radio" id="service" name="service" value="import" checked="checked" /> Importazione</label>
                                                <label class="radio inline"><input type="radio" name="service" value="validate" /> Validazione</label>
                                            </div>
                                        </div>
                                        <div class="control-group" th:if="${!#httpServletRequest.servletPath.contains('changeUsage')}">
                                            <label class="control-label" for="flag_pubblica">Pubblicazione OAI</label>
                                            <div class="controls"><input type="checkbox" name="flag_pubblica" id="flag_pubblica" /></div>
                                        </div>
                                        <div class="control-group" th:if="${!#httpServletRequest.servletPath.contains('changeUsage') and #httpServletRequest.getParameter('validate') == null}">
                                            <label class="control-label" for="flag_overwrite">Sovrascrittura</label>
                                            <div class="controls"><input type="checkbox" name="flag_overwrite" id="flag_overwrite" /></div>
                                        </div>
                                        <div class="control-group" style="display: none;" id="dressMagGroup" th:if="${!#httpServletRequest.servletPath.contains('changeUsage')}">
                                            <label class="control-label" for="dress_mag">Vestizione</label>
                                            <div class="controls"><input type="checkbox" name="dress_mag" id="dress_mag" checked="checked" /></div>
                                        </div>
                                    </fieldset>
                                </div>
                                <div th:if="${!#httpServletRequest.servletPath.contains('changeUsage')}" id="metsConfigArea" style="display: none">
                                    <div class="control-group"></div>
                                    <div class="control-group"></div>
                                    
                                    <fieldset>
                                        <legend>Configurazioni METS</legend>
                                        <div class="control-group" id="metsStprogValidation">
	                                        <label for="Mets.stprog" class="control-label" title="Valore da attribuire al campo stprog"><b>Stprog</b></label>
	                                        <div class="controls">
	                                            <input id="Mets.stprog" class="help-inline config_parameter span5" type="text" />
	                                        </div>
	                                    </div>
	                                    <div class="control-group">
	                                        <label for="Mets.collection" class="control-label" title="Valore da attribuire al campo collection, se non presente nel METS">Collection</label>
	                                        <div class="controls">
	                                            <input id="Mets.collection" class="config_parameter span5" type="text" />
	                                        </div>
	                                    </div>
	                                    <div class="control-group" id="metsAgencyValidation">
	                                        <label for="Mets.agency" class="control-label" title="Valore da attribuire al campo agency"><b>Agency</b></label>
	                                        <div class="controls">
	                                            <input id="Mets.agency" class="help-inline config_parameter span5" type="text" />
	                                        </div>
	                                    </div>
	                                    <div class="control-group">
	                                        <label for="Mets.access_rights" class="control-label" title="Valore da attribuire al campo access_rights"><b>Access rights</b></label>
	                                        <div class="controls">
	                                            <select id="Mets.access_rights" class="config_parameter span5">
                                                	<option selected="selected">1</option>
                                                	<option>0</option>
                                                </select>
	                                        </div>
	                                    </div>
	                                    <div class="control-group">
	                                        <label for="Mets.completeness" class="control-label" title="Valore da attribuire al campo completeness"><b>Completeness</b></label>
	                                        <div class="controls">
	                                            <select id="Mets.completeness" class="config_parameter span5">
                                                	<option selected="selected">0</option>
                                                	<option>1</option>
                                                </select>
	                                        </div>
	                                    </div>
                                        <div class="control-group">
                                            <label for="Mets.quality" class="control-label" title="Valore da attribuire al campo completeness"><b>Qualità</b></label>
                                            <div class="controls">
                                                <select id="Mets.quality" class="config_parameter span5">
                                                    <option selected="selected">ARCHIVE</option>
                                                    <option>HIGH</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <label for="Mets.external" class="control-label" title="Valore da attribuire al campo completeness"><b>Stream</b></label>
                                            <div class="controls">
                                                <select id="Mets.external" class="config_parameter span5">
                                                    <option selected="selected">INTERNAL</option>
                                                    <option>EXTERNAL</option>
                                                </select>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                                <div th:if="${!#httpServletRequest.servletPath.contains('changeUsage')}">
                                    <div class="control-group"></div>
                                    <div class="control-group"></div>
                                    <fieldset>
                                        <legend>Configurazioni speciali</legend>
                                        <div class="control-group">
                                            <div class="span6">
                                                <label for="BatchImportSize" title="Numero di MAG elaborati al termine dei quali eseguire periodicamente l'indicizzazione Solr"><b>Indicizzazione Solr dopo N elaborazioni</b></label>
                                                <input id="BatchImportSize" type="number" class="config_parameter span8" value="100" min="1" />
                                            </div>
                                            <div class="span6">
                                                <label for="MBUsableThreshold" title="Soglia minima di spazio libero su disco necessaria per la scrittura su disco"><b>Soglia minima di spazio libero su disco (in MB)</b></label>
                                                <input id="MBUsableThreshold" class="config_parameter span8" type="number" value="512" min="1" />
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="span6">
                                                <label for="Validator.SchemaErrorFlag" title="Come gestire gli errori di validazioni relativi a problemi di conformità con lo schema"><b>Gestione errori su conformit&agrave; schema</b></label>
                                                <select class="config_parameter span8" id="Validator.SchemaErrorFlag">
                                                    <option value="OK">Ignora</option>
                                                    <option value="WARNING">Warning</option>
                                                    <option value="ERROR" selected="selected">Errore</option>
                                                    <option value="FATAL_ERROR">Errore con arresto immediato</option>
                                                </select>
                                            </div>
                                            <div class="span6">
                                                <label for="Validator.SerialErrorFlag" title="Come gestire gli errori di validazioni relativi all'assenza delle informazioni aggiuntive per i MAG seriali"><b>Gestione errori su serialit&agrave;</b></label>
                                                <select class="config_parameter span8" id="Validator.SerialErrorFlag">
                                                    <option value="OK">Ignora</option>
                                                    <option value="WARNING">Warning</option>
                                                    <option value="ERROR" selected="selected">Errore</option>
                                                    <option value="FATAL_ERROR">Errore con arresto immediato</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="span6">
                                                <label for="Validator.SequenceNumberErrorFlag" title="Come gestire gli errori di validazioni relativi all'uso di sequence number non corretto"><b>Gestione errori su sequence number</b></label>
                                                <select class="config_parameter span8" id="Validator.SequenceNumberErrorFlag">
                                                    <option value="OK">Ignora</option>
                                                    <option value="WARNING">Warning</option>
                                                    <option value="ERROR" selected="selected">Errore</option>
                                                    <option value="FATAL_ERROR">Errore con arresto immediato</option>
                                                </select>
                                            </div>
                                            <div class="span6">
                                                <label for="Validator.StruErrorFlag" title="Come gestire gli errori di validazioni relativi alla sezione STRU"><b>Gestione errori su sezione STRU</b></label>
                                                <select class="config_parameter span8" id="Validator.StruErrorFlag">
                                                    <option value="OK">Ignora</option>
                                                    <option value="WARNING">Warning</option>
                                                    <option value="ERROR" selected="selected">Errore</option>
                                                    <option value="FATAL_ERROR">Errore con arresto immediato</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="span6">
                                                <label for="Validator.UsageErrorFlag" title="Come gestire gli errori di validazioni relativi a usage delle risorse digitali non corrispondenti"><b>Gestione errori su usage</b></label>
                                                <select class="config_parameter span8" id="Validator.UsageErrorFlag">
                                                    <option value="OK">Ignora</option>
                                                    <option value="WARNING">Warning</option>
                                                    <option value="ERROR" selected="selected">Errore</option>
                                                    <option value="FATAL_ERROR">Errore con arresto immediato</option>
                                                </select>
                                            </div>
                                            <div class="span6">
                                                <label for="Validator.MD5ErrorFlag" title="Come gestire gli errori di validazioni relativi a verifiche MD5 delle risorse digitali con esito negativo"><b>Gestione errori su verifica MD5 risorse digitali</b></label>
                                                <select class="config_parameter span8" id="Validator.MD5ErrorFlag">
                                                    <option value="OK">Ignora</option>
                                                    <option value="WARNING">Warning</option>
                                                    <option value="ERROR" selected="selected">Errore</option>
                                                    <option value="FATAL_ERROR">Errore con arresto immediato</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="control-group">
                                            <div class="span6">
                                                <label for="Validator.DimensionErrorFlag" title="Come gestire gli errori di validazioni relativi a dimensioni file delle risorse digitali non corrispondenti"><b>Gestione errori su dimensioni file risorse digitali</b></label>
                                                <select class="config_parameter span7" id="Validator.DimensionErrorFlag">
                                                    <option value="OK">Ignora</option>
                                                    <option value="WARNING" selected="selected">Warning</option>
                                                    <option value="ERROR">Errore</option>
                                                    <option value="FATAL_ERROR">Errore con arresto immediato</option>
                                                </select>
                                            </div>
                                            <div class="span6">
                                                <label for="Validator.MIMEErrorFlag" title="Come gestire gli errori di validazioni relativi a MIME delle risorse digitali non corrispondenti"><b>Gestione errori su MIME risorse digitali</b></label>
                                                <select class="config_parameter span8" id="Validator.MIMEErrorFlag">
                                                    <option value="OK">Ignora</option>
                                                    <option value="WARNING" selected="selected">Warning</option>
                                                    <option value="ERROR">Errore</option>
                                                    <option value="FATAL_ERROR">Errore con arresto immediato</option>
                                                </select>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                                <div class="control-group"></div>
                                <div class="control-group">
                                    <div th:if="${#httpServletRequest.servletPath.contains('import')}">
                                        <input type="button" id="importBtn" class="btn btn-primary" value="Importa" />
                                        <input type="button" style="display:none" class="btn btn-default" id="recoveryBtn" value="Riavvia Job" />
                                    </div>
                                    <div th:if="${#httpServletRequest.servletPath.contains('update')}">
                                        <input type="button" id="updateBtn" class="btn btn-primary" value="Aggiorna" />
                                    </div>
                                    <div th:if="${#httpServletRequest.servletPath.contains('changeUsage')}">
                                        <input type="button" id="changeUsageBtn" class="btn btn-primary" value="Cambia usage" />
                                    </div>
                                </div>
                            </div>
                            <div class="alert alert-error span12" id="confirm-error" style="display: none">Non sono stati selezionati progetti</div>
                            <div id="importBtnArea" class="span12">
                                <input type="button" value="Conferma Selezione" class="btn btn-default" onclick="confirm(this);" />
                                <input type="button" value="Annulla Selezione" class="btn btn-default" onclick="undoSelection(this);" />
                            </div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                        </div>
                        <div class="help-block row"></div>
                        <div class="help-block row"></div>
                        <div class="help-block row"></div>
                        <div id="jobStatusArea" class="span12" style="display: none" th:fragment="jobStatusArea">
                            <div class="page-header">
                                <h4 id="importJobID"></h4>
                            </div>
                            <table id="info_timestamp" class="span10 offset1">
                                <thead>
                                    <tr>
                                        <th class="span2"></th>
                                        <th class="span5">Inizio</th>
                                        <th class="span5">Fine</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th>Validazione</th>
                                        <td id="validate_start" class="icon_link">N/D</td>
                                        <td id="validate_end" class="icon_link">N/D</td>
                                    </tr>
                                    <tr>
                                        <th>Totale Processo</th>
                                        <td id="job_start" class="icon_link">N/D</td>
                                        <td id="job_end" class="icon_link">N/D</td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="span11">
                                <h5 id="warningNoMag" class="alert alert-warning hide">Non ci sono MAG da importare, controllo degli oggetti digitali</h5>
                                <h5 id="status" class="alert alert-info"></h5>
                                <div class="progress progress-striped">
                                    <div class="bar"><span class="percent"></span></div>
                                </div>
                            </div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                            <div class="span11">
                                <form id="reportForm" class="form-horizontal" method="get">
                                    <input type="hidden" name="id" th:value="${#httpServletRequest.getParameter('id')}" />
                                    <label class="control-label">Tipo di report: </label>
                                    <div class="controls">
                                        <select name="report">
                                            <option value="ALL">ALL</option>
                                            <option value="WARNING">WARNING</option>
                                            <option value="ERROR">ERROR</option>
                                            <option value="LOG">LOG</option>
                                        </select>
                                        <input type="submit" class="btn btn-default" id="reportBtn" value="Report" />
                                    </div>
                                </form>
                            </div>
                            <div class="help-block row"></div>
                            <div class="help-block row"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer th:fragment="footer">
            <p>[[${title}]] - versione <block th:text="${T(com.gruppometa.magteca.frontend.BuildNumber).getBuildNumber()}"/></p>
        </footer>
        <div th:fragment="modifyContainer" class="modal hide fade" id="modifyContainer">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 id="headingEdit">Creazione di un contenitore</h4>
            </div>
            <div class="modal-body">
                <div class="errore" id="messageEdit"></div>
                <form method="POST" enctype="multipart/form-data" id="upLoadModifyContainerForm">
                    <input type="hidden" id="idEdit">
                    <div class="control-group">
                            <label for="labelEdit"  class="control-label">Label:</label>
                            <input type="text"  class="form-control" id="labelEdit">
                    </div>
                    <div class="control-group" id="containerLine">
                        <label for="containerEdit" class="control-label">Container:</label>
                        <input type="text"  class="form-control" autocomplete="on" id="containerEdit">
                    </div>
                    <div class="control-group" id="frontespizioLine">
                        <label for="frontespizioEdit" class="control-label">Frontespizio:</label>
                        <input type="checkbox" class="form-control" id="frontespizioEdit"/>
                    </div>
                    <div class="control-group" id="usageLine">
                        <label for="labelEdit" class="control-label">Usage:</label>
                        <input type="text" class="form-control" id="usageEdit">
                    </div>
                    <div class="control-group" id="md5Line">
                            <label for="labelEdit"  class="control-label">Md5:</label>
                            <input type="text" readonly="readonly" class="form-control" id="md5Edit">
                    </div>
                    <div class="control-group" id="typeLine">
                        <label for="contentTypeEdit"  class="control-label">Tipo di contenuto:</label>
                        <input type="text" readonly="readonly" class="form-control" id="contentTypeEdit">
                    </div>
                    <div class="control-group" id="fileSizeLine">
                        <label for="fileSizeEdit"  class="control-label">Dimensione del file:</label>
                        <input type="text" readonly="readonly" class="form-control" id="fileSizeEdit">
                    </div>
                    <div class="control-group" id="fileLine">
                            <input type="file" id="inputFile" name="file" size="50" />
                            <input type="button" value="Scegli File" class="btn btn-default" onclick="$('#inputFile').trigger('click')" />
                            <span id="displayFileName"></span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <a class="btn btn-default" id="noBtnModify">Annulla</a>
                <a class="btn btn-primary" id="yesBtnModify">Ok</a>
            </div>
        </div>

    </body>
</html>
